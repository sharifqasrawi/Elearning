<div class="loginBox">
    
    <div *ngIf="errors">
        <div class="alert alert-danger" *ngFor="let error of errors">
            <strong>{{error}}</strong> 
            <button 
                class="btn btn-sm btn-warning" 
                style="float: right;"
                *ngIf="!sending && error === 'Account not activated'"
                (click)="resendConfirmationLink()"
                [disabled]="confirmationLinkSent || !loginForm.controls.username.valid">
                {{ !confirmationLinkSent ? 'Resend confirmation link' : 'Confirmation link sent' }}
            </button>

            <span 
                *ngIf="sending"
                class="btn btn-warning btn-sm" 
                style="float: right;">
                Sending...
            </span>

            <div class="clearfix"></div>
        </div>
    </div>

    <h2>
        <fa-icon [icon]="faLogin"></fa-icon>
        Login
    </h2>
    <hr>
    <form class="form-horizontal" [formGroup]="loginForm"(ngSubmit)="onSubmit()">

            <mat-form-field class="full-width">
                <mat-label>Email</mat-label>
                <input type="email" matInput formControlName="username" 
                       placeholder="Ex. pat@example.com">
                <mat-error *ngIf="!loginForm.controls.username.valid && loginForm.controls.username.touched">
                  Please enter a valid email address
                </mat-error>
            </mat-form-field>

            <mat-form-field class="full-width">
                <mat-label>Password</mat-label>
                <input type="password" matInput formControlName="password" 
                       placeholder="Please enter your password"
                       [type]="hidePwd ? 'password' : 'text'">
                       <button type="button" mat-icon-button matSuffix (click)="hidePwd = !hidePwd" [attr.aria-label]="'Hide password'" [attr.aria-pressed]="hidePwd">
                        <mat-icon>{{hidePwd ? 'visibility_off' : 'visibility'}}</mat-icon>
                    </button>
                <mat-error *ngIf="!loginForm.controls.password.valid && loginForm.controls.password.touched">
                    Please enter your password
                </mat-error>
            </mat-form-field>

            <mat-chip-list>
                <mat-chip class="mt-3" color="primary" selected>
                    <a [routerLink]="['/forgot-password']" class="chipLink" >
                        Forgot my password
                    </a>
                </mat-chip>
            </mat-chip-list>

        <button mat-raised-button type="submit" color="primary" [disabled]="!loginForm.valid || loading">
            {{ !loading ? 'Login' : 'loading...' }}
        </button>

    </form>
<div class="clearfix"></div>
</div>