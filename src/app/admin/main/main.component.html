<div class="admin-container" [class.admin-is-mobile]="mobileQuery.matches">

    <mat-toolbar color="primary" class="admin-toolbar">
        <mat-toolbar-row>
            <button mat-icon-button (click)="sidenav.toggle()">
                <mat-icon>menu</mat-icon>
            </button>
            <h1>Administration</h1>
            <div  class="toolBarButtons">
                <a mat-button [routerLink]="['', 'home']" target="_blank"
                [style.display]="mobileQuery.matches ? 'none' : 'inline'">
                    <mat-icon>home</mat-icon>
                    Home
                </a>

                <a mat-icon-button [matMenuTriggerFor]="menu">
                    <mat-icon>perm_identity</mat-icon>
                    {{ firstName + ' ' + lastName }}
                </a>
                <mat-menu #menu="matMenu" [overlapTrigger]="false">
                    <a mat-menu-item (click)="onLogout()">
                        <mat-icon>exit_to_app</mat-icon>
                        <span>Logout</span>
                    </a>
                </mat-menu>
            </div>
        </mat-toolbar-row>
    </mat-toolbar>

    <mat-sidenav-container class="admin-sidenav-container " >
        <mat-sidenav #sidenav class="admin-sidenav" mode="side" [opened]="mobileQuery.matches ? !navOpened : navOpened" (mouseenter)="mouseenter()"
            (mouseleave)="mouseleave()" [mode]="mobileQuery.matches ? 'over' : 'side'"
            [fixedInViewport]="mobileQuery.matches" fixedTopGap="56" >
            <mat-nav-list>
                <a mat-list-item [routerLink]="['/admin', 'dashboard']">
                    <mat-icon mat-list-icon>dashboard</mat-icon>
                    Dashboard
                </a>
                
                <mat-list-item (click)="showSubmenuCategories = !showSubmenuCategories" class="parent">
                    <span class="full-width">Categories</span>
                    <mat-icon mat-list-icon class="adminNavColor">view_quilt</mat-icon>
                    <mat-icon class="menu-button adminNavColor" [ngClass]="{'rotated' : showSubmenuCategories}">
                        expand_more
                    </mat-icon>
                </mat-list-item>
                <div class="submenu" [ngClass]="{'expanded' : showSubmenuCategories}">
                    <a mat-list-item [routerLink]="['/admin', 'categories']">
                        <mat-icon mat-list-icon>done_all</mat-icon>
                        Published
                    </a>
                    <a mat-list-item [routerLink]="['/admin', 'categories', 'trashed']">
                        <mat-icon mat-list-icon>delete</mat-icon>
                        Trash
                    </a>
                </div>

                <mat-list-item (click)="showSubmenuCourses = !showSubmenuCourses" class="parent">
                    <span class="full-width">Courses</span>
                    <mat-icon mat-list-icon class="adminNavColor">airplay</mat-icon>
                    <mat-icon class="menu-button adminNavColor" [ngClass]="{'rotated' : showSubmenuCourses}">
                        expand_more
                    </mat-icon>
                </mat-list-item>
                <div class="submenu" [ngClass]="{'expanded' : showSubmenuCourses}">
                    <a mat-list-item [routerLink]="['/admin', 'courses']">
                        <mat-icon mat-list-icon>done_all</mat-icon>
                        Published
                    </a>
                    <a mat-list-item [routerLink]="['/admin', 'courses', 'trashed']">
                        <mat-icon mat-list-icon>delete</mat-icon>
                        Trash
                    </a>
                </div>

                <mat-list-item (click)="showSubmenuUsers = !showSubmenuUsers" class="parent">
                    <span class="full-width">Users</span>
                    <mat-icon mat-list-icon class="adminNavColor">supervisor_account</mat-icon>
                    <mat-icon class="menu-button adminNavColor" [ngClass]="{'rotated' : showSubmenuUsers}">expand_more
                    </mat-icon>
                </mat-list-item>
                <div class="submenu" [ngClass]="{'expanded' : showSubmenuUsers}">
                    <a mat-list-item [routerLink]="['/admin', 'users', 'new-user']">
                        <mat-icon mat-list-icon>add_circle</mat-icon>
                        New User
                    </a>
                    <a mat-list-item [routerLink]="['/admin', 'users']">
                        <mat-icon mat-list-icon>supervised_user_circle</mat-icon>
                        List Users
                    </a>
                </div>

                <mat-list-item (click)="showSubmenuMessages = !showSubmenuMessages" class="parent">
                    <span class="full-width">Messaging</span>
                    <mat-icon mat-list-icon class="adminNavColor">message</mat-icon>
                    <mat-icon class="menu-button adminNavColor" [ngClass]="{'rotated' : showSubmenuMessages}">
                        expand_more
                    </mat-icon>
                </mat-list-item>
                <div class="submenu" [ngClass]="{'expanded' : showSubmenuMessages}">
                    <a mat-list-item [routerLink]="['/admin', 'messages', 'sent-emails']">
                        <mat-icon mat-list-icon>mail_outline</mat-icon>
                        Sent Emails
                    </a>
                    <a mat-list-item [routerLink]="['/admin', 'messages']">
                        <mat-icon mat-list-icon>message</mat-icon>
                        Messages
                    </a>
                </div>

                <mat-list-item (click)="showSubmenuDirs = !showSubmenuDirs" class="parent">
                    <span class="full-width">File Management</span>
                    <mat-icon mat-list-icon class="adminNavColor">folder</mat-icon>
                    <mat-icon class="menu-button adminNavColor" [ngClass]="{'rotated' : showSubmenuDirs}">expand_more
                    </mat-icon>
                </mat-list-item>
                <div class="submenu" [ngClass]="{'expanded' : showSubmenuDirs}">
                    <a mat-list-item [routerLink]="['/admin', 'files']">
                        <mat-icon mat-list-icon>file_copy</mat-icon>
                        Files
                    </a>
                    <a mat-list-item [routerLink]="['/admin', 'directories']">
                        <mat-icon mat-list-icon>dynamic_feed</mat-icon>
                        Directories
                    </a>
                </div>

                <mat-list-item (click)="showSubmenuTags = !showSubmenuTags" class="parent">
                    <span class="full-width">Tags Management</span>
                    <mat-icon mat-list-icon class="adminNavColor">loyalty</mat-icon>
                    <mat-icon class="menu-button adminNavColor" [ngClass]="{'rotated' : showSubmenuTags}">expand_more
                    </mat-icon>
                </mat-list-item>
                <div class="submenu" [ngClass]="{'expanded' : showSubmenuTags}">
                    <a mat-list-item [routerLink]="['/admin', 'tags']">
                        <mat-icon mat-list-icon>loyalty</mat-icon>
                        Tags
                    </a>
                </div>

            </mat-nav-list>
            <mat-nav-list></mat-nav-list>
        </mat-sidenav>

        <div class="admin-sidenav-content container" [style.marginTop.px]="mobileQuery.matches ? 56 : 0">
            <router-outlet></router-outlet>
        </div>

    </mat-sidenav-container>
</div>