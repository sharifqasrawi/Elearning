<h2 mat-dialog-title class="text-danger">
    <fa-icon [icon]="faBug"></fa-icon>
    Report a bug.
</h2>
<hr>
<form [formGroup]="form" (ngSubmit)="onSubmit()" (change)="formChanged()" *ngIf="!created">
    <div mat-dialog-content>
        <div *ngIf="errors">
            <div class="alert alert-danger" *ngFor="let error of errors">
                {{ error }}
            </div>
        </div>

        <mat-form-field class="full-width" appearance="legacy">
            <mat-label>Your Name:</mat-label>
            <input matInput formControlName="name" placeholder="Please enter your full name" required>
            <mat-error>This field is required</mat-error>
        </mat-form-field>

        <mat-form-field class="full-width mt-3" appearance="legacy">
            <mat-label>Your Email:</mat-label>
            <input matInput formControlName="email" placeholder="Please enter your email address" required>
            <mat-error>Please enter a valid email address.</mat-error>
        </mat-form-field>

        <div class="mt-3">
            <mat-label>Severity:</mat-label>
            <mat-radio-group formControlName="severity">
                <mat-radio-button class="ml-2" *ngFor="let severity of listSeverities" [value]="severity.level">
                    {{severity.name}}
                </mat-radio-button>
            </mat-radio-group>
        </div>

        <mat-form-field class="full-width mt-3" appearance="legacy">
            <mat-label>Description:</mat-label>
            <textarea matInput rows="4" formControlName="description" placeholder="Please enter a detailed description"
                required></textarea>
            <mat-error>This field is required</mat-error>
        </mat-form-field>
    </div>
    <div mat-dialog-actions class="float-right mt-3">
        <button type="button" mat-raised-button color="warn" (click)="onCancel()">Cancel</button>
        <button type="submit" mat-raised-button color="primary" [disabled]="!form.valid || creating ">
            {{ creating ? 'Sending...' : 'Send' }}
        </button>
    </div>
</form>


<div *ngIf="created">
    <div mat-dialog-content>
        <div class="alert alert-success text-center">
            <h1>
                <fa-icon [icon]="faCheckCircle"></fa-icon>
            </h1>
            <h3>Thank your for your feedback.</h3>
            <p>Your report will be handled as soon as possible.</p>
        </div>
    </div>
    <div mat-dialog-actions class="full-width">
        <button type="button" mat-raised-button color="primary" style="margin:  0 auto;"
            (click)="onClose()">Close</button>
    </div>
</div>